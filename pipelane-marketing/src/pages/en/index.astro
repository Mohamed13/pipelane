---
import BaseLayout from "@layouts/Base.astro";
import Navbar from "@components/Navbar.astro";
import Footer from "@components/Footer.astro";
import HomePage from "@components/pages/HomePage.astro";
import { getTranslations } from "@utils/i18n";

const locale = "en";
const dictionary = getTranslations(locale);
const currentPath = Astro.url.pathname;

const productSchema = {
  "@context": "https://schema.org",
  "@type": "Product",
  name: "Pipelane",
  description: "Qualify • Relaunch • Book",
  brand: { "@type": "Brand", name: "Pipelane" },
  offers: [
    {
      "@type": "Offer",
      priceCurrency: "EUR",
      price: "290",
      availability: "https://schema.org/InStock",
      url: "https://www.pipelane.app/prix"
    }
  ]
};

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: [
    {
      "@type": "Question",
      name: "How does the Lead Hunter → Booking flow work?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "The agent sources your prospects, launches the multichannel cadence, follows up intelligently and offers two time slots. You only handle hot replies."
      }
    },
    {
      "@type": "Question",
      name: "What about compliance (email, SMS, WhatsApp)?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "Daily caps, SMS STOP, email unsubscribe links and the WhatsApp 24h/HSM policy are enforced automatically."
      }
    },
    {
      "@type": "Question",
      name: "Do I need other tools to get started?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "No. Pipelane handles sourcing, cadences, follow-ups and booking. Optional ports exist if you need to push data to your CRM."
      }
    }
  ]
};
---
<BaseLayout
  title={dictionary.meta.title}
  description={dictionary.meta.description}
  canonical={dictionary.meta.canonical}
  lang={locale}
  ogTitle={dictionary.meta.ogTitle}
  ogDescription={dictionary.meta.ogDescription}
>
  <Navbar currentPath={currentPath} locale={locale} navigation={dictionary.navigation} />
  <HomePage locale={locale} home={dictionary.home} formCopy={dictionary.forms.demo} />
  <Footer locale={locale} footer={dictionary.footer} />

  <script type="application/ld+json">{JSON.stringify(productSchema)}</script>
  <script type="application/ld+json">{JSON.stringify(faqSchema)}</script>
</BaseLayout>
