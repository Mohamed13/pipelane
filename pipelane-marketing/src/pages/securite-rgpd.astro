---
import BaseLayout from "@layouts/Base.astro";
import Navbar from "@components/Navbar.astro";
import Footer from "@components/Footer.astro";
import Section from "@components/Section.astro";
import CTA from "@components/CTA.astro";
import Icon from "@components/Icon.astro";
import NeonBadge from "@components/NeonBadge.astro";

const metaTitle = "Sécurité & RGPD – Pipelane";
const metaDescription = "Découvrez comment Pipelane protège vos données : chiffrement, consentements, hébergement UE et audit complet.";

const pillars = [
  {
    title: "Chiffrement & stockage",
    description: "Données chiffrées en transit (TLS 1.3) et au repos (AES-256). Secrets isolés dans un coffre KMS."
  },
  {
    title: "Consentements & opt-out",
    description: "Gestion native des opt-out email/SMS, respect de la fenêtre WhatsApp 24h, traçabilité des consentements."
  },
  {
    title: "Accès & journalisation",
    description: "RBAC granulaire, SSO disponible, journal complet des actions et export audit à la demande."
  }
];

const guarantees = [
  "Hébergement par défaut en UE (région Paris), option région US sur demande",
  "Backups chiffrés quotidiens, restauration en < 4 h",
  "Bascule automatique en lecture seule si un quota est atteint",
  "Contrats de sous-traitance conformes (resend, Meta, hébergeur)"
];
---
<BaseLayout title={metaTitle} description={metaDescription} canonical="https://www.pipelane.app/securite-rgpd">
  <Navbar currentPath={Astro.url.pathname} />
  <main class="space-y-24 lg:space-y-32 pt-32">
    <section class="container space-y-6">
      <NeonBadge text="Sécurité & RGPD" />
      <h1 class="text-balance text-4xl font-semibold leading-tight text-onSurfaceStrong sm:text-5xl">Sécurité & RGPD</h1>
      <p class="max-w-3xl text-lg leading-relaxed text-onSurface">
        Pipelane est conçu pour respecter vos obligations légales : consentement, opt-out, traçabilité, hébergement UE et gouvernance des accès.
      </p>
    </section>

    <Section
      id="pillars"
      eyebrow="Nos piliers"
      title="Protection des données à chaque étape"
      contentClass="mt-12 grid gap-6 md:grid-cols-3"
    >
      {pillars.map((pillar) => (
        <div class="glass rounded-3xl border border-line/30 p-6 text-sm leading-relaxed text-onSurface">
          <h2 class="text-lg font-semibold text-onSurfaceStrong">{pillar.title}</h2>
          <p class="mt-3">{pillar.description}</p>
        </div>
      ))}
    </Section>

    <Section
      id="garanties"
      eyebrow="Garanties"
      title="Engagements contractuels"
      contentClass="mt-12 space-y-3"
    >
      <ul class="space-y-3 text-sm leading-relaxed text-onSurface">
        {guarantees.map((item) => (
          <li class="flex items-start gap-3">
            <span class="mt-1 text-primary"><Icon name="shield" size={18} /></span>
            <span>{item}</span>
          </li>
        ))}
      </ul>
    </Section>

    <CTA
      id="demo"
      title="Parler conformité et sécurité avec nous"
      description="Nous pouvons partager nos politiques, réaliser un questionnaire de sécurité et vous proposer un DPA adapté."
      primaryLabel="Demander une démo"
      secondaryLabel="Consulter la documentation"
      secondaryHref="https://docs.pipelane.app"
    />
  </main>
  <Footer />
</BaseLayout>
