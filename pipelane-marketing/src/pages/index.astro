---
import BaseLayout from "@layouts/Base.astro";
import Navbar from "@components/Navbar.astro";
import Footer from "@components/Footer.astro";
import Section from "@components/Section.astro";
import CTA from "@components/CTA.astro";
import StatCard from "@components/StatCard.astro";
import DemoForm from "@components/DemoForm.astro";
import NeonBadge from "@components/NeonBadge.astro";
import Icon from "@components/Icon.astro";

const heroBullets = ["+ de réponses", "Zéro oubli", "Tout au même endroit"];

const gains = [
  {
    title: "Gain de temps",
    description: "Fini les emails manuels et les relances oubliées. L’agent prépare et envoie pour vous."
  },
  {
    title: "Régularité",
    description: "Chaque jour, aux meilleures heures, votre pipe avance sans effort ni charge mentale."
  },
  {
    title: "Résultats",
    description: "Plus de réponses, plus de rendez-vous qualifiés, sans sacrifier la personnalisation."
  }
];

const workflowSteps = [
  {
    title: "Connectez vos canaux",
    description: "Email, WhatsApp, SMS : tout est prêt en quelques minutes."
  },
  {
    title: "Importez vos contacts et votre pitch",
    description: "CSV ou CRM, l’agent s’adapte et prépare vos messages."
  },
  {
    title: "L’agent écrit, envoie, relance",
    description: "Toujours au bon moment, avec le bon angle, sans relance agressive."
  },
  {
    title: "Vous ne gérez que les rendez-vous",
    description: "L’agent classe les réponses et vous alerte dès qu’un prospect est chaud."
  }
];

const relancePoints = [
  "Choisit automatiquement le meilleur créneau.",
  "Adapte l’angle : rappel, valeur, preuve sociale ou question.",
  "Message court (3–6 lignes) et modifiable à tout moment.",
  "Explique son choix : \"Pourquoi ce timing ?\" pour rester transparent."
];

const dashboardStats = [
  { metric: "+48 %", description: "de réponses sur 30 jours grâce aux relances ciblées", icon: "spark" },
  { metric: "11 min", description: "de paramétrage pour lancer une séquence complète", icon: "clock" },
  { metric: "92 %", description: "des réponses qualifiées transformées en rendez-vous", icon: "target" }
];

const testimonials = [
  {
    name: "Camille, COO",
    quote: "On a doublé nos prises de rendez-vous sans recruter. L’agent gère le volume, l’équipe gère les deals."
  },
  {
    name: "Jules, Head of Growth",
    quote: "La relance intelligente est un no-brainer : bon moment, bon ton, pas de spam."
  },
  {
    name: "Sonia, SDR Lead",
    quote: "Je ne perds plus de temps à classer les réponses. Tout arrive déjà trié dans la console."
  }
];

const logos = ["NovaOps", "Shiftly", "QuantLeap", "Beryl", "Clarity"];

const securityHighlights = [
  "Données chiffrées au repos et en transit",
  "Opt-out et consentements respectés par canal",
  "Hébergement UE disponible sur demande",
  "Journal complet des actions et accès RBAC"
];

const pageTitle = "Pipelane – Votre assistant commercial qui ne dort jamais";
const pageDescription =
  "Pipelane centralise WhatsApp, Email et SMS, rédige et envoie des messages personnalisés, relance intelligemment et vous amène des rendez-vous qualifiés.";

const productSchema = {
  "@context": "https://schema.org",
  "@type": "Product",
  name: "Pipelane",
  description: pageDescription,
  brand: { "@type": "Brand", name: "Pipelane" },
  offers: [
    {
      "@type": "Offer",
      priceCurrency: "EUR",
      price: "290",
      availability: "https://schema.org/InStock",
      url: "https://www.pipelane.app/prix"
    }
  ]
};

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: [
    {
      "@type": "Question",
      name: "Comment fonctionne l’agent de prospection IA ?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "Vous connectez vos canaux, importez votre pitch et vos contacts. L’agent écrit, envoie, relance et classe les réponses ; vous validez ou modifiez les propositions avant envoi."
      }
    },
    {
      "@type": "Question",
      name: "La relance intelligente respecte-t-elle les opt-out ?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "Oui, l’agent intègre les consentements canal par canal, respecte les quiet hours et explique chaque choix de relance avant validation."
      }
    },
    {
      "@type": "Question",
      name: "Ai-je besoin d’autres outils (n8n, Zapier) pour commencer ?",
      acceptedAnswer: {
        "@type": "Answer",
        text: "Non, tout tourne dans Pipelane. Des ports optionnels (événements sortants, actions entrantes) sont disponibles plus tard si vous souhaitez des intégrations spécifiques."
      }
    }
  ]
};
---
<BaseLayout title={pageTitle} description={pageDescription} canonical="https://www.pipelane.app/">
  <Fragment slot="head">
    <script type="application/ld+json">{JSON.stringify(productSchema)}</script>
    <script type="application/ld+json">{JSON.stringify(faqSchema)}</script>
  </Fragment>
  <Navbar currentPath={Astro.url.pathname} />
  <main class="space-y-28 lg:space-y-36">
    <section id="hero" class="relative overflow-hidden pt-36">
      <div class="container grid gap-12 lg:grid-cols-[minmax(0,1fr)_minmax(0,480px)]">
        <div class="space-y-6">
          <NeonBadge text="Console omni-canale + Agent IA" />
          <h1 class="text-balance text-4xl font-semibold leading-tight tracking-tight text-onSurfaceStrong sm:text-5xl">
            Votre assistant commercial qui ne dort jamais
          </h1>
          <p class="text-lg leading-relaxed text-onSurface">
            Pipelane centralise WhatsApp, Email et SMS, rédige et envoie des messages personnalisés, relance intelligemment et vous amène des rendez-vous qualifiés — sans charge mentale.
          </p>
          <ul class="flex flex-wrap gap-3 text-sm font-medium uppercase tracking-[0.35em] text-primary">
            {heroBullets.map((item) => (
              <li key={item} class="rounded-full border border-primary/40 px-4 py-2">
                {item}
              </li>
            ))}
          </ul>
        <div class="flex flex-wrap items-center gap-4 pt-2">
          <a
            href="#demo"
            class="btn-primary"
            data-analytics="cta_click"
              data-location="hero-primary"
            >
              Demander une démo
            </a>
            <a
              href="/prospection-ia"
              class="btn-ghost"
              data-analytics="cta_click"
              data-location="hero-secondary"
          >
            Voir l’agent de prospection
          </a>
        </div>
        <div class="max-w-xl rounded-[26px] border border-line/25 bg-surfaceOverlay/70 p-5 shadow-soft">
          <DemoForm idPrefix="hero" compact />
        </div>
      </div>
        <div class="relative isolate">
          <div class="absolute -left-6 -top-10 h-52 w-52 rounded-full bg-primary/20 blur-3xl"></div>
          <div class="absolute -bottom-12 right-0 h-56 w-56 rounded-full bg-secondary/20 blur-3xl"></div>
          <div class="relative space-y-5 rounded-[32px] border border-line/30 bg-surfaceOverlay/70 p-6 shadow-soft backdrop-blur">
            <div class="rounded-2xl border border-line/40 bg-surface/80 p-5">
              <div class="flex items-center justify-between text-xs uppercase tracking-[0.3em] text-onSurface">
                <span>Console</span>
                <span>Prospection</span>
              </div>
              <div class="mt-4 space-y-3 text-sm">
                <div class="flex items-center justify-between rounded-2xl bg-surfaceOverlay px-4 py-3">
                  <span class="text-onSurface">Séquence BtoB SaaS</span>
                  <span class="text-primary font-semibold">En cours</span>
                </div>
                <div class="rounded-2xl bg-surfaceOverlay px-4 py-3 text-left">
                  <p class="text-xs uppercase tracking-[0.3em] text-primary">Prochaine relance</p>
                  <p class="mt-2 text-lg font-semibold text-onSurfaceStrong">Mardi 10:30 · angle valeur</p>
                  <p class="mt-1 text-xs text-onSurface/70">Contact : camille@alto.co</p>
                </div>
              </div>
            </div>
            <div class="rounded-2xl border border-line/35 bg-surfaceOverlay/90 p-5 text-sm leading-relaxed text-onSurface">
              <p class="font-semibold text-onSurfaceStrong">Pourquoi ce choix ?</p>
              <p class="mt-2 text-onSurface">
                Historique lu, dernière réponse il y a 3 jours, meilleurs taux mardi matin. Proposition de relance angle “valeur” avec preuve client.
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <Section
      id="gains"
      eyebrow="Ce que vous gagnez"
      title="Trois résultats dès la première semaine"
      description="L’agent IA travaille à votre place, avec votre ton, et vous libère du suivi quotidien."
      contentClass="mt-12 grid gap-6 md:grid-cols-3"
    >
      {gains.map((gain) => (
        <div class="reveal glass rounded-3xl border border-line/30 p-6">
          <h3 class="text-xl font-semibold text-onSurfaceStrong">{gain.title}</h3>
          <p class="mt-3 text-sm leading-relaxed text-onSurface">{gain.description}</p>
        </div>
      ))}
    </Section>

    <Section
      id="marche"
      eyebrow="Comment ça marche"
      title="L’agent s’occupe de tout, vous ne gérez que les rendez-vous"
      description="Une mise en route simple pour une prospection qui tourne en continu."
      contentClass="mt-12 grid gap-6 md:grid-cols-2"
    >
      {workflowSteps.map((step, index) => (
        <div class="reveal glass rounded-3xl border border-line/30 p-6">
          <div class="flex items-start gap-4">
            <span class="flex h-10 w-10 items-center justify-center rounded-full bg-primary/15 text-primary font-semibold">{String(index + 1).padStart(2, "0")}</span>
            <div class="space-y-2">
              <h3 class="text-lg font-semibold text-onSurfaceStrong">{step.title}</h3>
              <p class="text-sm leading-relaxed text-onSurface">{step.description}</p>
            </div>
          </div>
        </div>
      ))}
    </Section>

    <Section
      id="relance"
      eyebrow="Relance intelligente"
      title="La relance qui ne saoule pas"
      description="Bon moment, bon angle, 3–6 lignes utiles. Modifiable à tout instant avec explication \"Pourquoi ce choix ?\"."
      variant="panel"
      contentClass="grid gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]"
    >
      <div class="space-y-4 text-sm leading-relaxed text-onSurface">
        <ul class="space-y-3">
          {relancePoints.map((point) => (
            <li class="flex items-start gap-3">
              <span class="mt-1 text-primary">
                <Icon name="spark" size={18} />
              </span>
              <span>{point}</span>
            </li>
          ))}
        </ul>
        <div class="rounded-3xl border border-line/40 bg-surfaceOverlay/80 p-5">
          <p class="text-xs uppercase tracking-[0.3em] text-primary">Carte d’exemple</p>
          <p class="mt-2 text-sm text-onSurfaceStrong">Prochaine relance : Jeudi 15:00 · angle preuve sociale</p>
          <p class="mt-2 text-xs text-onSurface/70">Suggestion : “Nous venons d’accompagner NovaOps sur le même enjeu, voici le retour en 2 points…”</p>
        </div>
      </div>
      <div class="rounded-3xl border border-line/30 bg-surfaceOverlay/60 p-6 text-sm leading-relaxed text-onSurface">
        <p class="text-xs uppercase tracking-[0.3em] text-primary">Pourquoi vous allez aimer</p>
        <p class="mt-3 text-onSurfaceStrong">
          L’agent connaît l’historique, respecte les quiet hours, intègre vos opt-out et vous laisse la main. Vous validez en un clic ou modifiez avant envoi.
        </p>
      </div>
    </Section>

    <Section
      id="mvp"
      eyebrow="MVP sans n8n"
      title="Tout tourne dans Pipelane"
      description="Pas besoin d’un stack complexe pour démarrer. Consolidez votre prospection dans un seul outil, prêt à l’emploi."
      contentClass="mt-12 grid gap-6 lg:grid-cols-[minmax(0,1fr)_minmax(0,1fr)]"
    >
      <div class="reveal glass rounded-3xl border border-line/30 p-6 text-sm leading-relaxed text-onSurface">
        <p>
          L’agent écrit, envoie, relance et classe les réponses au sein de la console. Besoin d’intégrations spécifiques ?
          Activez nos deux ports optionnels (événements sortants, actions entrantes) quand vous le souhaitez.
        </p>
        <ul class="mt-4 space-y-2 text-sm">
          <li class="flex items-center gap-2 text-primary"><span class="h-2 w-2 rounded-full bg-primary"></span>Ports optionnels prêts mais désactivés par défaut</li>
          <li class="flex items-center gap-2 text-primary"><span class="h-2 w-2 rounded-full bg-primary"></span>Relances et suivi natifs, sans n8n</li>
          <li class="flex items-center gap-2 text-primary"><span class="h-2 w-2 rounded-full bg-primary"></span>Console unique pour le support, la vente et la réussite client</li>
        </ul>
      </div>
      <div class="reveal rounded-3xl border border-dashed border-primary/40 bg-primary/10 p-6 text-sm leading-relaxed text-primary">
        <p class="font-semibold uppercase tracking-[0.3em]">Ports optionnels</p>
        <p class="mt-2">• Webhooks sortants (événements conversation, réponses, relances)</p>
        <p>• Actions entrantes (créer un ticket, pousser un événement CRM)</p>
        <p class="mt-3 text-primary/70">Activez-les quand vous voulez, sans toucher au cœur du produit.</p>
      </div>
    </Section>

    <Section
      id="dashboard"
      eyebrow="Tableau de bord"
      title="Pilotez vos conversations et vos conversions"
      description="Envoyés, délivrés, ouverts, réponses, rendez-vous : tout est suivi en temps réel avec des vues prêtes."
      center
      contentClass="mt-12 grid gap-6 md:grid-cols-3"
    >
      {dashboardStats.map((stat) => (
        <StatCard metric={stat.metric} description={stat.description} icon={stat.icon} />
      ))}
    </Section>

    <Section
      id="preuve"
      eyebrow="Preuve & réassurance"
      title="Des équipes commerciales & growth qui dorment mieux"
      description="Ils nous utilisent déjà pour garder le rythme sans épuiser les équipes."
      contentClass="mt-12 grid gap-8 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]"
    >
      <div class="space-y-6">
        <div class="grid gap-6 md:grid-cols-3">
          {testimonials.map((testimonial) => (
            <div class="reveal glass rounded-3xl border border-line/30 p-6 text-sm leading-relaxed text-onSurface">
              <p class="text-onSurface/80">“{testimonial.quote}”</p>
              <p class="mt-4 text-xs uppercase tracking-[0.3em] text-primary">{testimonial.name}</p>
            </div>
          ))}
        </div>
        <div class="flex flex-wrap items-center gap-4 text-xs uppercase tracking-[0.35em] text-onSurface/60">
          {logos.map((logo) => (
            <span class="rounded-full border border-line/20 px-4 py-2">{logo}</span>
          ))}
        </div>
      </div>
      <div class="reveal glass-strong space-y-4 rounded-3xl border border-line/30 p-6 text-sm leading-relaxed text-onSurface">
        <p class="text-xs uppercase tracking-[0.3em] text-primary">Sécurité & RGPD</p>
        <ul class="space-y-3">
          {securityHighlights.map((item) => (
            <li class="flex items-start gap-3">
              <span class="mt-1 text-primary">
                <Icon name="shield" size={18} />
              </span>
              <span>{item}</span>
            </li>
          ))}
        </ul>
      </div>
    </Section>

    <CTA
      id="demo"
      title="Remplissez votre pipe sans écrire un seul email"
      description="Réservez une démo : on connecte vos canaux, on importe votre pitch et votre agent IA est prêt en moins d’une heure."
      primaryLabel="Demander une démo"
      secondaryLabel="Voir la prospection IA"
      secondaryHref="/prospection-ia"
    />
  </main>
  <Footer />
</BaseLayout>
