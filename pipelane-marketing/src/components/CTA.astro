---
import NeonBadge from "./NeonBadge.astro";
import DemoForm from "./DemoForm.astro";

interface Props {
  id: string;
  title: string;
  description: string;
  primaryLabel: string;
  secondaryLabel: string;
  secondaryHref?: string;
}

const { id, title, description, primaryLabel, secondaryLabel, secondaryHref = "#" } = Astro.props as Props;

const demoMode = (import.meta.env.PUBLIC_DEMO_MODE ?? "false") === "true";
const consoleUrl = (import.meta.env.PUBLIC_CONSOLE_URL ?? "http://localhost:4200").replace(/\/$/, "");
---
<section id={id} class="py-20">
  <div class="container">
    <div class="reveal relative overflow-hidden rounded-[36px] border border-line/35 bg-surface-strong p-10 lg:grid lg:grid-cols-[1.1fr_1fr] lg:gap-16">
      <div class="relative z-10 space-y-6 text-elevated">
        <div class="inline-flex">
          <NeonBadge text="Plateforme d'automations omni-canales" />
        </div>
        <h2 class="text-3xl font-semibold tracking-tight on-surface-strong sm:text-4xl">{title}</h2>
        <p class="max-w-xl text-lg leading-relaxed on-surface">{description}</p>
        <div class="flex flex-wrap gap-4 pt-2">
          <a href="#demo" class="btn-primary" data-analytics="cta_click" data-location={`${id}-primary`}>
            {primaryLabel}
          </a>
          {demoMode && (
            <a
              class="btn-ghost"
              href={`${consoleUrl}/login?demo=1`}
              data-analytics="cta_click"
              data-location={`${id}-demo`}
            >
              Lancer la d√©mo
            </a>
          )}
          <a class="btn-ghost" href={secondaryHref} data-analytics="cta_click" data-location={`${id}-secondary`}>
            {secondaryLabel}
          </a>
        </div>
      </div>
      <div class="relative z-10 mt-10 lg:mt-0">
        <DemoForm idPrefix={`${id}-form`} submitLabel={primaryLabel} />
      </div>
      <div class="absolute inset-0 -z-10 scrim">
        <div class="absolute inset-0 bg-hero-gradient opacity-70"></div>
      </div>
    </div>
  </div>
</section>

